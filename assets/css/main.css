/* Reset */
*{margin:0;padding:0;box-sizing:border-box}

/* Base */
html,body{
  height:100%;
  font-family:'Verdana Pro Regular',Verdana,sans-serif;
  background:#000;             /* 防首帧闪白 */
}

/* ====== 顶层黑幕（与 main.js 的 FADE 匹配）====== */
.ivt-fade-overlay{
  position:fixed; inset:0;
  background:#000;
  opacity:1;                   /* 初始黑场，JS 下一帧降到 0 */
  pointer-events:none;
  z-index:99999;               /* 盖住所有内容 */
  will-change:opacity;         /* 提前告诉浏览器优化 */
  transition:opacity .7s ease; /* 对齐默认 IN/OUT 700ms */
}

/* ====== 菜单按钮：方形外框 + 轻磨砂 ====== */
.menu-button{
  position:absolute; top:40px; right:40px;
  z-index:1002;
  cursor:pointer;
  width:40px; height:40px;
  border-radius:8px;                      /* 方形，轻微圆角 */
  background:rgba(255,255,255,0.06);
  border:0;                               /* 无描边 */
  color:#fff;
  display:grid; place-items:center;
  backdrop-filter:blur(6px);
  -webkit-backdrop-filter:blur(6px);
  transition:background-color .2s ease, transform .1s ease;
}
.menu-button::before{content:'≡';font-size:1.4em;line-height:1}
.menu-button:hover{background:rgba(255,255,255,0.12)}
.menu-button:active{transform:scale(0.95)}
.menu-button.hide{display:none}

/* ====== 侧栏：磨砂玻璃效果 ====== */
.sidebar-menu{
  position:fixed; top:8%; right:-20%; width:15%; height:100%;
  padding:50px;
  background:rgba(0,0,0,.45);
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
  border:1px solid rgba(255,255,255,0.08);
  border-right:none;
  box-shadow:0 20px 50px rgba(0,0,0,0.35);
  color:#808080; text-align:center;
  transition:right .5s;
  z-index:1001;

  /* 滚动支持 */
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
  overscroll-behavior:contain;
  scrollbar-width:none;
  touch-action:pan-y;
}
.sidebar-menu::-webkit-scrollbar{ display:none; }

.sidebar-menu.active{right:0}
.sidebar-menu div.space{height:20px}

/* ====== 菜单链接 ====== */
.sidebar-menu a{
  position:relative;
  display:block;
  margin-bottom:10px;
  padding:8px 0;
  font-size:12px;
  color:#fff;
  text-decoration:none;
  text-align:center;
  border-radius:6px;
  transition:background-color .2s ease, color .2s ease, border-color .2s ease;
}
.sidebar-menu a:hover{
  background:rgba(255,255,255,.12);
  color:#fff;
}

/* ====== 已选页面 ====== */
.sidebar-menu a[aria-current="page"]{
  color:#fff;
  font-weight:600;
  background:rgba(255,255,255,0.08);
  border:0;
  border-radius:6px;
}
.sidebar-menu a[title]:hover::after{
  display:none !important; content:none !important;
}

/* ====== 媒体层 ====== */
.work-image,.work-video{
  position:fixed; inset:0; width:100vw; height:100vh;
  object-fit:cover; background-position:center; background-repeat:no-repeat;
  transition:opacity .5s ease;
  will-change:opacity;
}
.work-image{display:block; opacity:1}
.work-video{display:none; opacity:0}

/* ================== 说明块：桌面尺寸固定 ================== */
:root{
  --desc-width: 28rem;
  --desc-height: 260px;
}

.work-description{
  position:absolute;
  left:2%; bottom:5%;
  z-index:2;

  width:var(--desc-width);
  height:var(--desc-height);

  color:#fff;
  font-size:14px;
  line-height:1.55;
  text-align:justify;

  padding:12px 14px;
  border-radius:8px;

  overflow-y:auto;
  overflow-x:hidden;
  -webkit-overflow-scrolling:touch;
  overscroll-behavior:contain;

  overflow-wrap:break-word;
  word-break:break-word;
  hyphens:auto;

  background:rgba(0,0,0,0.42);
  backdrop-filter:blur(6px);
  -webkit-backdrop-filter:blur(6px);
  box-shadow:0 8px 30px rgba(0,0,0,0.35);
}
.work-description h1{
  font-size:1.15em;
  margin:0 0 .45em 0;
}
.work-description p{ margin:.6em 0; }
.work-description::-webkit-scrollbar{ width:6px; height:6px; }
.work-description::-webkit-scrollbar-thumb{ background:none; border-radius:6px; }
.work-description::-webkit-scrollbar-track{ background:transparent; }

/* ====== 手机端：改用百分比，横竖屏都适配 ====== */
@media (max-width:768px){
  .work-description{
    left:4%;
    bottom:max(5%, env(safe-area-inset-bottom));
    width:76vw;
    height:28vh;

    font-size:clamp(12px, 3.2vw, 14px);
    line-height:1.55;
    text-align:left;
    padding:10px 12px;

    background:rgba(0,0,0,0.32);
    backdrop-filter:blur(4px);
    -webkit-backdrop-filter:blur(4px);
    box-shadow:0 6px 22px rgba(0,0,0,0.28);
  }
  .work-description h1{
    font-size:1.05em;
    margin:0 0 .4em 0;
  }
}

/* ====== 自适应菜单（手机宽度 50%） ====== */
@media (max-width:768px){
  .sidebar-menu{
    width:50%;
    right:-50%;
    top:max(10px, env(safe-area-inset-top));
    bottom:max(10px, env(safe-area-inset-bottom));
    height:auto;
    max-height:calc(100dvh - max(10px, env(safe-area-inset-top)) - max(10px, env(safe-area-inset-bottom)));
    padding:28px 18px;
  }
  .sidebar-menu a{font-size:14px; padding:10px 0;}
  .sidebar-menu div.space{height:14px;}
}

/* 小高宽场景兜底 */
@media (max-height:540px){
  .sidebar-menu{ max-height:calc(100dvh - 20px); }
}

/* ====== 无障碍：减少动画 ====== */
@media (prefers-reduced-motion: reduce){
  .ivt-fade-overlay,
  .work-image,.work-video,
  .sidebar-menu{ transition:none !important }
}

/* ====== 预启动隐藏正文 ====== */
html.ivt-preboot body > :not(.ivt-fade-overlay){
  visibility:hidden !important;
}
@media (prefers-reduced-motion: reduce){
  html.ivt-preboot body > :not(.ivt-fade-overlay){
    visibility:hidden !important;
  }
}
